#:import navigation_screen_manager navigation_screen_manager
#:import layouts layouts
#:import action_bar action_bar

<MainMenu@BoxLayout>:
    orientation: "vertical"
    Label:
        bold: True
        text: "Kart Simulator"
        font_size: 50
        color: 0,1,1,1 # <-----------
        size_hint: 1,.25
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
    Button:
        text: "Sign in / Log in"
        on_press: app.manager.push("connection"), app.ButtonSound()
    Button:
        text: "Play"
        on_press: app.start_ks(), app.ButtonSound()
    Button:
        text: "Rules of the game"
        on_press: app.manager.push("Rules"), app.ButtonSound()

<MainMenu2>:
    GridLayout:
        canvas.before:
            BorderImage:
                # BorderImage behaves like the CSS BorderImage
                border: 10, 10, 10, 10
                source: 'Images/LJ44.jpeg'
                pos: self.pos
                size: self.size
    Label:
        bold: True
        text: "Kart Simulator"
        font_size: 50
        color: 1,0,0,1 # <-----------
        pos_hint: {'x':0,'y':.85}
        size_hint: 1,.15
        canvas.before:
            Color:
                rgba: 0, 0, 0, .75
            Rectangle:
                pos: self.pos
                size: self.size
    Button:
        pos_hint: {'x':.8,'y':.8}
        size_hint: .2, .05
        # background_color: (1.0, 0.0, 0.0, .75)
        text: "Sign in / Log in"
        on_press: app.manager.push("connection"), app.ButtonSound()
    Button:
        pos_hint: {'x':0,'y':.8}
        size_hint: .2, .05
        # background_color: (1.0, 0.0, 0.0, .75)
        text: "Rules of the game"
        on_press: app.manager.push("Rules"), app.ButtonSound()

    Button:
        pos_hint: {'x':.3,'y':.3}
        size_hint: .4, .3
        text: "Play"
        background_color: (1.0, 0.0, 0.0, .75)
        on_press: app.start_ks(root.chosen_world, root.chosen_music), app.ButtonSound()

    Spinner:
        id: worlds_spinner_id
        pos_hint: {'x':0,'y':.6}
        size_hint: .2, .1
        text: "Chose your world !"
        values: root.worlds_list
        on_text:
            root.changeWorldSpinnerText(worlds_spinner_id.text), app.ButtonSound()

    Spinner:
        id: music_spinner_id
        pos_hint: {'x':.8,'y':.6}
        size_hint: .2, .1
        text: "Chose your music !"
        values: root.music_list
        on_text:
            root.changeMusicSpinnerText(music_spinner_id.text), app.ButtonSound()

    Button:
        id: prewViewButton_ID
        pos_hint: {'x':.2,'y':.6}
        size_hint: .08, .1
        text: "Preview"
        on_press: preView_ID.changePreView(root.chosen_world), app.ButtonSound()

    PreView:
        id: preView_ID
        pos_hint: {'x':0,'y':.1}
        size_hint: .2, .1
        # canvas.after:
        #     Color:
        #         rgba: 1,0,0,1
        #     Rectangle:

    Button:
        id:btnExit
        pos_hint: {'x':.95,'y':.95}
        size_hint: .05,.05
        text:"Exit"
        on_press: app.ButtonSound(), app.stop()
    





<KS_screen>:
    name: "Kart_Simulator"
    layout_id: noActionBar
    BoxLayout:
        id: noActionBar



<MyScreenManager>:
    Screen:
        name: "MainMenu"    
        MainMenu2:
    Screen:
        name: "connection"
        BoxLayoutWithActionBar:
            title: "Sign in / Log in"
            MenuTabbedPanel:
    Screen:
        name: "Rules"
        BoxLayoutWithActionBar:
            title: "Rules of the game"
            Rules:
    Screen:
        name: "pauseMenu"
        BoxLayout:
            orientation: "horizontal"
            Button:
                size: 100,100
                text: "Resume game"
                on_press: app.manager.pop(), app.ButtonSound()


<KS>:
    orientation: 'horizontal'
    Button:
        text: root.button_text
        size_hint: .1,.1
        pos_hint: {'x': 0 , 'y': 0 }
        on_press: root.pause(), app.ButtonSound()


<Rules@BoxLayout>:
    orientation: "vertical"
    Label:
        bold: True
        text: "Rules of the Kart Simulator"
        font_size: 32
        color: .8,.4,.2,1 # <-----------
        size_hint: 1,.1
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
    Label:
        italic: True
        text: ' - Le but est de compléter le nombre de tours requis le plus rapidement possible\n\n - Les karts perdent de la vitesse lorsquils touchent le bord de la piste ou des obstacles quelconques\n\n - La partie est perdue si le joueur sort de la piste (par un bout sans barrières)'
        font_size: 16
        color: 0,0,0,1 # <-----------
        size_hint: 1,.9
        canvas.before:
            Color:
                rgba: .8,.4,.2,1
            Rectangle:
                pos: self.pos
                size: self.size
  
<PauseMode>:
    Button:
        size_hint:.2,.1
        pos_hint: {'x': .4 , 'y': .5 }
        text:"Resume"
        on_release: app.game_instance.resumeGame(), app.ButtonSound()
    
    Button:
        size_hint:.2,.1
        pos_hint: {'x': .4 , 'y': .4 }
        text:"Quit game"
        on_release: app.manager.pop(),app.clear_game(), app.ButtonSound()